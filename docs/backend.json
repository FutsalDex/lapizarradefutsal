
{
  "entities": {
    "Exercise": {
      "title": "Exercise",
      "type": "object",
      "description": "Represents a futsal exercise or drill.",
      "properties": {
        "name": {"type": "string"},
        "image": {"type": "string", "format": "uri"},
        "number": {"type": "string"},
        "numberOfPlayers": {"type": "string"},
        "objectives": {"type": "string"},
        "variations": {"type": "string"},
        "visible": {"type": "boolean"},
        "aiHint": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"},
        "userId": {"type": "string"},
        "description": {"type": "string"},
        "duration": {"type": "string"},
        "category": {"type": "string"},
        "consejos": {"type": "string"},
        "Espacio y materiales necesarios": {"type": "string"},
        "edad": {
            "type": "object",
            "properties": {
                "infantil": {"type": "boolean"},
                "cadete": {"type": "boolean"},
                "juvenil": {"type": "boolean"},
                "senior": {"type": "boolean"}
            }
        }
      },
      "required": ["name", "description", "category", "visible"]
    },
    "Session": {
      "title": "Session",
      "type": "object",
      "description": "Represents a training session composed of multiple exercises.",
      "properties": {
        "createdAt": {"type": "string", "format": "date-time"},
        "date": {"type": "string", "format": "date-time"},
        "finalExercise": {"type": "string"},
        "initialExercise": {"type": "string"},
        "initialExercises": {"type": "array", "items": {"type": "string"}},
        "mainExercises": {"type": "array", "items": {"type": "string"}},
        "microcycle": {"type": "string"},
        "objectives": {"type": "string"},
        "players": {"type": "number"},
        "sessionNumber": {"type": "string"},
        "space": {"type": "string"},
        "updatedAt": {"type": "string", "format": "date-time"},
        "userId": {"type": "string"}
      },
      "required": ["date", "userId"]
    },
    "UserProfile": {
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "createdAt": {"type": "string", "format": "date-time"},
        "displayName": {"type": "string"},
        "email": {"type": "string", "format": "email"},
        "favorites": {"type": "array", "items": {"type": "string"}},
        "photoURL": {"type": "string", "format": "uri"},
        "role": {"type": "string"},
        "subscription": {"type": "string"},
        "subscriptionEndDate": {"type": "string", "format": "date-time"},
        "subscriptionStartDate": {"type": "string", "format": "date-time"}
      },
      "required": ["email", "createdAt"]
    },
     "Team": {
      "title": "Team",
      "type": "object",
      "description": "Represents a futsal team.",
      "properties": {
        "club": {"type": "string"},
        "competition": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"},
        "name": {"type": "string"},
        "ownerId": {"type": "string"},
        "ownerName": {"type": "string"},
        "memberIds": {"type": "array", "items": {"type": "string"}}
      },
      "required": ["name", "ownerId"]
    },
    "Player": {
      "title": "Player",
      "type": "object",
      "description": "Represents a player in a team.",
      "properties": {
        "active": { "type": "boolean" },
        "assists": { "type": "number" },
        "fouls": { "type": "number" },
        "goalsConceded": { "type": "number" },
        "goals": { "type": "number" },
        "minutesPlayed": { "type": "number" },
        "name": { "type": "string" },
        "number": { "type": "string" },
        "saves": { "type": "number" },
        "turnovers": { "type": "number" },
        "pj": { "type": "number" },
        "position": { "type": "string" },
        "recoveries": { "type": "number" },
        "shotsOnTarget": { "type": "number" },
        "shotsOffTarget": { "type": "number" },
        "yellowCards": { "type": "number" },
        "redCards": { "type": "number" }
      },
      "required": ["name", "number", "position"]
    },
    "MatchEvent": {
        "title": "Match Event",
        "type": "object",
        "description": "Represents a single event that occurred during a match, like a goal.",
        "properties": {
            "type": { "type": "string", "enum": ["goal", "yellowCard", "redCard"] },
            "team": { "type": "string", "enum": ["local", "visitor"] },
            "period": { "type": "string", "enum": ["1H", "2H"] },
            "minute": { "type": "number" },
            "playerId": { "type": "string" },
            "playerName": { "type": "string" }
        },
        "required": ["type", "team", "period", "minute"]
    },
    "PlayerStats": {
        "title": "Player Stats",
        "type": "object",
        "description": "Represents the statistics for a single player in a match period.",
        "properties": {
            "goals": {"type": "number"},
            "assists": {"type": "number"},
            "yellowCards": {"type": "number"},
            "redCards": {"type": "number"},
            "fouls": {"type": "number"},
            "shotsOnTarget": {"type": "number"},
            "shotsOffTarget": {"type": "number"},
            "recoveries": {"type": "number"},
            "turnovers": {"type": "number"},
            "saves": {"type": "number"},
            "goalsConceded": {"type": "number"},
            "minutesPlayed": {"type": "number"},
            "unoVsUno": {"type": "number"}
        }
    },
    "Match": {
      "title": "Match",
      "type": "object",
      "description": "Represents a futsal match.",
      "properties": {
        "competition": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"},
        "date": {"type": "string", "format": "date-time"},
        "isFinished": {"type": "boolean"},
        "localScore": {"type": "number"},
        "localTeam": {"type": "string"},
        "matchType": {"type": "string", "enum": ["Amistoso", "Liga", "Copa", "Torneo"]},
        "matchday": {"type": "number"},
        "teamId": {"type": "string"},
        "userId": {"type": "string"},
        "visitorScore": {"type": "number"},
        "visitorTeam": {"type": "string"},
        "squad": {"type": "array", "items": {"type": "string"}},
        "events": {
            "type": "array",
            "items": { "$ref": "#/entities/MatchEvent" }
        },
        "playerStats": {
          "type": "object",
          "description": "Stats for the players in the match, separated by half.",
          "properties": {
            "1H": {
              "type": "object",
              "patternProperties": { ".*": { "$ref": "#/entities/PlayerStats" } }
            },
            "2H": {
              "type": "object",
              "patternProperties": { ".*": { "$ref": "#/entities/PlayerStats" } }
            }
          }
        },
        "opponentStats": {
          "type": "object",
          "description": "Opponent stats for the match, separated by half.",
          "properties": {
            "1H": {
              "type": "object",
              "properties": {
                  "goals": {"type": "number"},
                  "fouls": {"type": "number"},
                  "shotsOnTarget": {"type": "number"},
                  "shotsOffTarget": {"type": "number"},
                  "shotsBlocked": {"type": "number"},
                  "recoveries": {"type": "number"},
                  "turnovers": {"type": "number"}
              }
            },
            "2H": {
              "type": "object",
              "properties": {
                  "goals": {"type": "number"},
                  "fouls": {"type": "number"},
                  "shotsOnTarget": {"type": "number"},
                  "shotsOffTarget": {"type": "number"},
                  "shotsBlocked": {"type": "number"},
                  "recoveries": {"type": "number"},
                  "turnovers": {"type": "number"}
              }
            }
          }
        },
        "fouls": {
            "type": "object",
            "properties": {
                "local": {"type": "number"},
                "visitor": {"type": "number"}
            }
        },
        "timeouts": {
            "type": "object",
            "properties": {
                "local": {"type": "number"},
                "visitor": {"type": "number"}
            }
        }
      },
      "required": ["localTeam", "visitorTeam", "date", "matchType", "isFinished", "teamId", "userId"]
    },
    "TeamMember": {
        "title": "Team Member",
        "type": "object",
        "description": "Represents a staff member of a team.",
        "properties": {
            "createdAt": {"type": "string", "format": "date-time"},
            "email": {"type": "string", "format": "email"},
            "name": {"type": "string"},
            "role": {"type": "string", "enum": [
                "Entrenador",
                "2º Entrenador",
                "Delegado",
                "Preparador Físico",
                "Analista Táctico/Scouting",
                "Fisioterapeuta",
                "Médico",
                "Psicólogo",
                "Nutricionista"
            ]},
            "teamId": {"type": "string"},
            "userId": {"type": "string"}
        },
        "required": ["teamId", "email", "role", "userId"]
    },
    "AttendanceRecord": {
      "title": "Attendance Record",
      "type": "object",
      "description": "Represents the attendance for a single training session.",
      "properties": {
        "date": { "type": "string", "format": "date" },
        "teamId": { "type": "string" },
        "userId": { "type": "string" },
        "playerStatus": {
          "type": "object",
          "description": "A map where keys are player IDs and values are their attendance status.",
          "patternProperties": {
            ".*": { "type": "string", "enum": ["Presente", "Ausente", "Justificado", "Lesionado"] }
          }
        }
      },
      "required": ["date", "teamId", "userId", "playerStatus"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores user profile information."
    },
    "/exercises/{exerciseId}": {
      "schema": {
        "$ref": "#/entities/Exercise"
      },
      "description": "Stores the public library of futsal exercises."
    },
    "/users/{userId}/favorites/{exerciseId}": {
        "schema": {
            "type": "object",
            "properties": {
                "favorited": {"type": "boolean"}
            }
        },
        "description": "Stores a user's favorite exercises. The document ID is the exercise ID."
    },
    "/users/{userId}/sessions/{sessionId}": {
        "schema": {
            "$ref": "#/entities/Session"
        },
        "description": "Stores training sessions created by a user."
    },
    "/teams/{teamId}": {
        "schema": { "$ref": "#/entities/Team" },
        "description": "Stores team information."
    },
    "/teams/{teamId}/players/{playerId}": {
        "schema": { "$ref": "#/entities/Player" },
        "description": "Stores the players for a specific team."
    },
     "/teamMembers/{memberId}": {
      "schema": { "$ref": "#/entities/TeamMember" },
      "description": "Stores staff members for all teams."
    },
    "/matches/{matchId}": {
      "schema": { "$ref": "#/entities/Match" },
      "description": "Stores all matches for all teams."
    },
    "/teams/{teamId}/attendance/{attendanceId}": {
        "schema": { "$ref": "#/entities/AttendanceRecord" },
        "description": "Stores attendance records for a team. The document ID is typically the date in YYYY-MM-DD format."
    }
  }
}
